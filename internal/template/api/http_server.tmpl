// Code generated by {{.PluginName}}. DO NOT EDIT.
package {{.ModuleName}}

type HttpServer struct {
    wrapper     routesWrapper
}

func NewHttpServer() *HttpServer {
    return &HttpServer{}
}

func (h *HttpServer) HTTPHandler(apiHandlers interface{}) (http.Handler, error) {
	handlers, ok := apiHandlers.({{.ServiceName}}Server)
	if !ok {
		return nil, errors.New("cannot convert received handler to the service proper type")
	}

    mux := http.NewServeMux()
	h.wrapper = routesWrapper{
		handlers: handlers,
	}

    {{range .Methods}}
    mux.HandleFunc("{{toUpper .HTTPMethod}} {{.Endpoint}}", h.wrapper.{{.Name}})
    {{- range .AdditionalHTTPMethods}}
    mux.HandleFunc("{{toUpper .HTTPMethod}} {{.Endpoint}}", h.wrapper.{{.Name}})
    {{- end}}
    {{- end}}

    return mux, nil
}


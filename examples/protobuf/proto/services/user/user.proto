syntax = "proto3";

package services.user;

option go_package = "examples/gen/go/services/user;user";

import "mikros/extensions/extensions.proto";
import "services/shared/shared.proto";

message UserWire {
  option (mikros.extensions.wire_expansion) = {
    custom_code: {
      import: {
        alias: "shared"
        name: "examples/gen/go/services/shared"
      }

      signature: "IsActive() bool"
      body: "return u.Status == shared.Status_STATUS_ACTIVE"
    }

    custom_code: {
      signature: "HasEmail() bool"
      body: "return u.Email != \"\""
    }
  };

  option (mikros.extensions.outbound_options) = {
    export: true
    naming_mode: NAMING_MODE_SNAKE_CASE
  };

  string id = 1 [(mikros.extensions.domain) = {
    struct_tag: {
      name: "validate",
      value: "omitempty,min=10,max=42"
    }
    struct_tag: {
      name: "gorm",
      value: "primaryKey"
    }
  }];

  string name = 2;
  shared.Status status = 3;
  string email = 4;
  int32 age = 5;
}